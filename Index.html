<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>A-1 2809 | QUANTUM BIOTECH OS</title>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;500;700&family=JetBrains+Mono:wght@100;400&display=swap" rel="stylesheet">
    <style>
        :root { --bg: #050505; --accent: #fff; --gold: #c5a059; --glass: rgba(10, 10, 10, 0.95); --b: rgba(255, 255, 255, 0.05); --success: #00ffaa; }
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-font-smoothing: antialiased; }
        body { background: var(--bg); color: var(--accent); font-family: 'Space Grotesk', sans-serif; overflow-x: hidden; }

        /* TEXTURA DE GRANO DE PELÍCULA (LUJO) */
        body::before { content: ""; position: fixed; inset: 0; background: url('https://grainy-gradients.vercel.app/noise.svg'); opacity: 0.04; pointer-events: none; z-index: 9999; }

        /* --- INTERFAZ PÚBLICA (LANDING) --- */
        #viewport { min-height: 100vh; padding: 20px; transition: filter 0.5s ease; }
        header { height: 80vh; display: flex; flex-direction: column; align-items: center; justify-content: center; position: relative; }
        .logo-box { border: 1px solid var(--accent); padding: 20px 60px; position: relative; backdrop-filter: blur(10px); }
        .logo-box h1 { font-size: 4rem; letter-spacing: 20px; font-weight: 700; }
        .status-dot { width: 8px; height: 8px; background: var(--success); border-radius: 50%; display: inline-block; margin-right: 10px; box-shadow: 0 0 10px var(--success); }

        /* BARRAS DE RENDIMIENTO TÉCNICO */
        .analytics-preview { max-width: 900px; margin: 0 auto 100px; padding: 40px; background: var(--glass); border: 1px solid var(--b); }
        .bar-container { margin-bottom: 25px; }
        .bar-label { font-size: 0.6rem; letter-spacing: 2px; color: #555; margin-bottom: 8px; display: flex; justify-content: space-between; }
        .bar-outer { height: 2px; background: #111; width: 100%; position: relative; }
        .bar-inner { height: 100%; background: var(--accent); position: absolute; transition: width 2s cubic-bezier(0.19, 1, 0.22, 1); }

        /* FORMULARIO DE ADQUISICIÓN */
        #order-panel { max-width: 480px; margin: 0 auto 150px; background: #000; border: 1px solid var(--b); padding: 60px; position: relative; }
        input { width: 100%; background: transparent; border: none; border-bottom: 1px solid #222; color: #fff; padding: 15px 0; font-family: 'JetBrains Mono'; margin-bottom: 30px; outline: none; transition: 0.4s; }
        input:focus { border-bottom-color: var(--gold); }
        .btn-action { width: 100%; padding: 20px; background: #fff; color: #000; font-weight: 700; letter-spacing: 5px; border: none; cursor: pointer; transition: 0.3s; }
        .btn-action:hover { background: var(--gold); transform: scale(1.02); }

        /* --- CONSOLA MAESTRA (OS) --- */
        #master-os { display: none; position: fixed; inset: 0; background: #000; z-index: 10000; padding: 40px; overflow-y: auto; }
        .os-header { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #111; padding-bottom: 20px; margin-bottom: 40px; }
        .stats-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin-bottom: 40px; }
        .stat-card { background: #080808; border: 1px solid #111; padding: 30px; position: relative; }
        .stat-card label { font-size: 0.5rem; color: #444; letter-spacing: 2px; }
        .stat-card h2 { font-family: 'JetBrains Mono'; font-size: 2.2rem; margin-top: 10px; color: var(--gold); }

        /* TABLA DE OPERACIONES CON EDICIÓN */
        table { width: 100%; border-collapse: collapse; font-family: 'JetBrains Mono'; font-size: 0.65rem; }
        th { text-align: left; padding: 20px; border-bottom: 1px solid #222; color: #333; }
        td { padding: 20px; border-bottom: 1px solid #080808; }
        .btn-edit { background: none; border: 1px solid #333; color: #555; padding: 5px 10px; cursor: pointer; margin-right: 5px; }
        .btn-wa { background: var(--success); color: #000; font-weight: 700; text-decoration: none; padding: 5px 15px; }

        /* MODAL DE EDICIÓN */
        #edit-modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.9); z-index: 10001; align-items: center; justify-content: center; }
        .modal-content { background: #0a0a0a; border: 1px solid #222; padding: 40px; width: 400px; }

        .gate-trigger { position: fixed; bottom: 20px; left: 20px; opacity: 0.01; cursor: pointer; width: 50px; height: 50px; }
        .legal { font-size: 0.5rem; color: #222; text-align: center; padding: 40px; line-height: 2; letter-spacing: 1px; }
    </style>
</head>
<body>

<div id="viewport">
    <header>
        <div class="logo-box">
            <h1>A-1</h1>
        </div>
        <p style="letter-spacing: 15px; color: #444; margin-top: 40px; font-size: 0.6rem;">
            <span class="status-dot"></span>SYSTEM ACTIVE: 2809-PROTOCOL
        </p>
    </header>

    <section class="analytics-preview">
        <h2 style="font-weight: 300; letter-spacing: 10px; font-size: 0.8rem; margin-bottom: 40px; color: #888;">FÓRMULA LONGEVITY v6.0</h2>
        <div class="bar-container">
            <div class="bar-label"><span>NMN / NR (SIRT1 ACTIVATION)</span><span>500MG</span></div>
            <div class="bar-outer"><div class="bar-inner" style="width: 100%"></div></div>
        </div>
        <div class="bar-container">
            <div class="bar-label"><span>TRANS-RESVERATROL 98%</span><span>250MG</span></div>
            <div class="bar-outer"><div class="bar-inner" style="width: 100%"></div></div>
        </div>
        <div class="bar-container">
            <div class="bar-label"><span>ALFA-GPC NOOTROPIC</span><span>200MG</span></div>
            <div class="bar-outer"><div class="bar-inner" style="width: 100%"></div></div>
        </div>
        <div class="bar-container">
            <div class="bar-label"><span>COENZIMA Q10 / PQQ</span><span>120MG</span></div>
            <div class="bar-outer"><div class="bar-inner" style="width: 100%"></div></div>
        </div>
    </section>

    <section id="order-panel">
        <div style="text-align:center; margin-bottom:40px;">
            <h2 style="font-weight:300; letter-spacing:5px;">ADQUISICIÓN</h2>
            <p style="font-size:0.5rem; color:var(--gold); margin-top:10px;">MADRID NORTE SECTOR EXCLUSIVO</p>
        </div>
        <input type="text" id="cust-name" placeholder="IDENTIDAD">
        <input type="tel" id="cust-tel" placeholder="WHATSAPP (+34)">
        <input type="text" id="cust-addr" placeholder="DIRECCIÓN DE ENTREGA">
        <input type="time" id="cust-time">
        <button class="btn-action" onclick="executeEliteOrder()">ADQUIRIR (130.00€)</button>
    </section>

    <footer class="legal">
        PROTECCIÓN NDA: EL FABRICANTE SE COMPROMETE A NO DIVULGAR LA FÓRMULA NI FABRICAR PARA TERCEROS. <br>
        EMPRESA RESPONSABLE: REGISTRO SANITARIO AESAN 2026.
    </footer>
</div>

<div class="gate-trigger" onclick="requestAccess()"></div>

<div id="master-os">
    <div class="os-header">
        <h2 style="letter-spacing:10px;">A-1 COMMAND CENTER</h2>
        <button onclick="location.reload()" style="background:none; border:1px solid #333; color:#fff; padding:10px 20px; cursor:pointer; font-size:0.6rem;">LOGOUT</button>
    </div>

    <div class="stats-grid">
        <div class="stat-card"><label>INGRESOS BRUTOS</label><h2 id="os-rev">0€</h2></div>
        <div class="stat-card"><label>PROFIT (40%)</label><h2 id="os-net">0€</h2></div>
        <div class="stat-card"><label>EXPEDIENTES</label><h2 id="os-count">0</h2></div>
        <div class="stat-card"><label>STOCK LOTE 01</label><h2 id="os-stock">100</h2></div>
    </div>

    <div style="background:#080808; padding:30px; border:1px solid #111;">
        <table>
            <thead><tr><th>ID</th><th>IDENTIDAD</th><th>LOGÍSTICA</th><th>HORA</th><th>OPERACIONES</th></tr></thead>
            <tbody id="os-list"></tbody>
        </table>
    </div>

    <button onclick="hardReset()" style="margin-top:100px; background:none; border:none; color:#200; font-size:0.5rem; cursor:pointer;">[ DESTRUIR BASE DE DATOS LOCAL ]</button>
</div>

<div id="edit-modal">
    <div class="modal-content">
        <h3 style="margin-bottom:20px; font-size:0.8rem;">EDITAR REGISTRO</h3>
        <input type="text" id="edit-name" placeholder="Nombre">
        <input type="text" id="edit-addr" placeholder="Dirección">
        <button class="btn-action" onclick="saveEdit()" style="margin-bottom:10px;">ACTUALIZAR</button>
        <button class="btn-action" onclick="closeEdit()" style="background:#200; color:#fff;">CANCELAR</button>
    </div>
</div>

<script>
    // --- MOTOR DE PERSISTENCIA INDESTRUCTIBLE ---
    const DB_KEY = 'A1_PROTOCOL_2809_ULTRA_PERSISTENCE_V2';
    let db = JSON.parse(localStorage.getItem(DB_KEY)) || { rev: 0, stock: 100, orders: [] };
    let currentEditIndex = null;

    function sync() {
        localStorage.setItem(DB_KEY, JSON.stringify(db));
    }

    // --- AUDIO TÁCTICO ---
    const audio = new (window.AudioContext || window.webkitAudioContext)();
    function beep(freq = 1000) {
        const o = audio.createOscillator(); const g = audio.createGain();
        o.type = 'square'; o.frequency.value = freq;
        o.connect(g); g.connect(audio.destination);
        g.gain.exponentialRampToValueAtTime(0.0001, audio.currentTime + 0.2);
        o.start(); o.stop(audio.currentTime + 0.2);
    }

    // --- OPERACIONES CLIENTE ---
    function executeEliteOrder() {
        const n = document.getElementById('cust-name').value;
        const t = document.getElementById('cust-tel').value;
        if(!n || !t) return alert("EXPEDIENTE INCOMPLETO");

        beep(800);
        db.orders.push({
            id: (db.orders.length + 1).toString().padStart(3, '0'),
            name: n.toUpperCase(),
            tel: t.replace(/\s/g, ''),
            addr: document.getElementById('cust-addr').value.toUpperCase(),
            time: document.getElementById('cust-time').value,
            date: new Date().toLocaleDateString()
        });
        db.rev += 130;
        db.stock--;
        sync();
        alert("PROTOCOLO DE ACCESO ENVIADO CON ÉXITO.");
        location.reload();
    }

    // --- OPERACIONES MASTER (OS) ---
    function requestAccess() {
        const key = prompt("MASTER KEY:");
        if(key === "0990") {
            beep(1200);
            document.getElementById('viewport').style.filter = 'blur(10px)';
            document.getElementById('master-os').style.display = 'block';
            renderOS();
        }
    }

    function renderOS() {
        document.getElementById('os-rev').innerText = db.rev + '€';
        document.getElementById('os-net').innerText = (db.rev * 0.4).toFixed(2) + '€';
        document.getElementById('os-count').innerText = db.orders.length;
        document.getElementById('os-stock').innerText = db.stock;

        const list = document.getElementById('os-list');
        list.innerHTML = "";
        db.orders.slice().reverse().forEach((o, index) => {
            const realIndex = db.orders.length - 1 - index;
            const msg = encodeURIComponent(`*A-1 2809 | PROTOCOLO ELITE*\nConfirmamos entrega hoy a las ${o.time}.`);
            list.innerHTML += `
                <tr>
                    <td>#${o.id}</td>
                    <td><b>${o.name}</b><br><small>${o.tel}</small></td>
                    <td>${o.addr}</td>
                    <td style="color:var(--success)">${o.time}</td>
                    <td>
                        <button class="btn-edit" onclick="openEdit(${realIndex})">EDITAR</button>
                        <a href="https://api.whatsapp.com/send?phone=${o.tel}&text=${msg}" target="_blank" class="btn-wa">WA</a>
                    </td>
                </tr>
            `;
        });
    }

    // --- SISTEMA DE EDICIÓN ---
    function openEdit(index) {
        currentEditIndex = index;
        document.getElementById('edit-name').value = db.orders[index].name;
        document.getElementById('edit-addr').value = db.orders[index].addr;
        document.getElementById('edit-modal').style.display = 'flex';
    }

    function saveEdit() {
        db.orders[currentEditIndex].name = document.getElementById('edit-name').value.toUpperCase();
        db.orders[currentEditIndex].addr = document.getElementById('edit-addr').value.toUpperCase();
        sync();
        closeEdit();
        renderOS();
    }

    function closeEdit() {
        document.getElementById('edit-modal').style.display = 'none';
    }

    function hardReset() {
        if(confirm("ATENCIÓN: Se destruirá toda la base de datos local. ¿Continuar?")) {
            localStorage.removeItem(DB_KEY);
            location.reload();
        }
    }

    // Animación de entrada de barras
    window.onload = () => {
        setTimeout(() => {
            document.querySelectorAll('.bar-inner').forEach(bar => {
                bar.style.width = bar.parentElement.previousElementSibling.querySelector('span:last-child').innerText !== '' ? '100%' : '0%';
            });
        }, 500);
    };
</script>
</body>
</html>
